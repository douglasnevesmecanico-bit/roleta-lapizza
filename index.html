<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Roleta Premiada - La Pizza Delivery</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #c1121f; /* vermelho pizzaria */
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100vh;
  touch-action: manipulation;
}

.container {
  background: #111;
  padding: 16px;
  border-radius: 22px;
  text-align: center;
  color: #fff;
  width: 92vw;
  max-width: 360px;
  box-shadow: 0 0 20px rgba(0,0,0,0.6);
}

.logo {
  width: 170px;
  margin-bottom: 10px;
}

canvas {
  background: #fff;
  border-radius: 50%;
  margin-top: 10px;
  width: 100%;
  max-width: 280px;
  height: auto;
}

button {
  margin-top: 14px;
  padding: 14px 22px;
  font-size: 16px;
  border: none;
  border-radius: 30px;
  background: #f4c430;
  color: #000;
  font-weight: bold;
  cursor: pointer;
  width: 100%;
}

button:disabled {
  background: gray;
  color: #fff;
}

.timer {
  margin-top: 8px;
  font-size: 15px;
  color: #f4c430;
  font-weight: bold;
}

.regra {
  font-size: 12px;
  opacity: 0.9;
  margin-top: 10px;
}
</style>
</head>

<body>

<div class="container">

  <img src="logo.png" class="logo" alt="La Pizza Delivery">

  <canvas id="roleta" width="280" height="280"></canvas>

  <button id="girar">GIRAR ROLETA</button>

  <p id="resultado"></p>
  <p id="timer" class="timer"></p>

  <p class="regra">
    âœ” Compra mÃ­nima R$70<br>
    âœ” VÃ¡lido somente neste pedido<br>
    âœ” Uso Ãºnico por cliente
  </p>

</div>

<script>
const premios = [
  "Cupom R$10 ğŸ’¸",
  "Entrega GrÃ¡tis ğŸš´",
  "Cupom R$10 ğŸ’¸",
  "Refrigerante GrÃ¡tis ğŸ¥¤",
  "Borda Recheada ğŸ§€",
  "NÃ£o foi dessa vez ğŸ˜…"
];

const cores = [
  "#f4c430",
  "#000000",
  "#ffd84d",
  "#1a1a1a",
  "#f4c430",
  "#333333"
];

const numeroWhats = "5521979289177";

const canvas = document.getElementById("roleta");
const ctx = canvas.getContext("2d");
const girarBtn = document.getElementById("girar");
const resultado = document.getElementById("resultado");
const timerEl = document.getElementById("timer");

let anguloAtual = 0;
let tempoRestante = 30 * 60;

// trava uso Ãºnico
if (localStorage.getItem("roleta_usada")) {
  girarBtn.disabled = true;
  resultado.innerHTML = "âš ï¸ VocÃª jÃ¡ participou da roleta.";
}

function desenharRoleta() {
  const fatia = 2 * Math.PI / premios.length;
  for (let i = 0; i < premios.length; i++) {
    ctx.beginPath();
    ctx.fillStyle = cores[i];
    ctx.moveTo(140,140);
    ctx.arc(140,140,140,i*fatia,(i+1)*fatia);
    ctx.fill();

    ctx.save();
    ctx.translate(140,140);
    ctx.rotate(i*fatia + fatia/2);
    ctx.fillStyle = "#fff";
    ctx.font = "bold 13px Arial";
    ctx.fillText(premios[i], 40, 5);
    ctx.restore();
  }
}

function iniciarContagem() {
  const intervalo = setInterval(() => {
    const min = Math.floor(tempoRestante / 60);
    const seg = tempoRestante % 60;
    timerEl.innerHTML = `â° Aproveite: ${min}:${seg < 10 ? "0"+seg : seg}`;

    if (tempoRestante <= 0) {
      clearInterval(intervalo);
      timerEl.innerHTML = "â›” Tempo expirado";
    }
    tempoRestante--;
  }, 1000);
}

desenharRoleta();

girarBtn.onclick = () => {
  girarBtn.disabled = true;
  localStorage.setItem("roleta_usada", "true");

  const giro = Math.random() * 360 + 1440;
  anguloAtual += giro;

  canvas.style.transition = "transform 4s ease-out";
  canvas.style.transform = `rotate(${anguloAtual}deg)`;

  setTimeout(() => {
    const fatia = 360 / premios.length;
    const index = Math.floor(((anguloAtual % 360) / fatia));
    const premio = premios[premios.length - 1 - index];

    iniciarContagem();

    const textoWhats = encodeURIComponent(
      `ğŸ‰ Ganhei na Roleta Premiada da La Pizza Delivery!\n\nPrÃªmio: ${premio}\n\nâœ” Compra mÃ­nima R$70\nâœ” VÃ¡lido somente neste pedido\nâ° Usar agora`
    );

    resultado.innerHTML = `
      ğŸ‰ VocÃª ganhou:<br><strong>${premio}</strong><br>
      <a href="https://wa.me/${numeroWhats}?text=${textoWhats}">
        <button>ğŸ“² Resgatar no WhatsApp</button>
      </a>
    `;
  }, 4000);
};
</script>

</body>
</html>
